<!DOCTYPE html><head><title>Restone Image's Alpha Channel - kkocdko's blog</title><meta name="description" content="Photoshop doesn't seem to provide this"><script src="/bundle.js" onload="[].flat||(location='/update.html')"></script></head><main><article><h1>Restone Image's Alpha Channel</h1><p>Here is a simple but special problem: I need an icon from the app, but it is rendered dynamic by code, couldn&#39;t be extracted directly from the app package.</p><p>Just take a screenshot? This icon has some translucent parts. Use Photoshop to make translucent effect? Seems good, but it is impossible to restone alpha channel <strong>precisely</strong>. Why?</p><h2 id="algorithm">Algorithm</h2><pre><code class="language-javascript">[fgR, fgG, fgB, alpha], [bgR, bgG, bgB];
outR = fgR * aplha + bgR * (1 - aplha);</code></pre><p>Let&#39;s take a look at the algorithm for adding a background to a translucent image.</p><p>There are two unknowns in this equation! That&#39;s why Photoshop can&#39;t solve this problem. For example, with background <code>rgb(255, 255, 255)</code>, both <code>rgba(0, 0, 0, 63)</code> and <code>rgba(63, 63, 63, 255)</code> will mix the same result. So, we need two equations.</p><h2 id="solution">Solution</h2><p>Forcibly change the background color of app by debug tools, take two screenshots with different backgrounds.</p><p>Then, try my online tool: <a href="/toy/realpha">/toy/realpha</a></p> <img src="/res/20210723-1958-001.webp" width="640" height="984"><p>Click the left-top and right-top rectangles can load images with different backgrounds.</p><p>Input the background color, then click the big rectangle at the bottom to generate the output image.</p><p>Right-click the image to save.</p></article></main>