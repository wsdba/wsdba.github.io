<!DOCTYPE html><head><title>如何极限优化压缩文件体积 - kkocdko's blog</title><meta name="description" content="微调 7-Zip 参数，时间换空间"><script src="/bundle.js" onload="[].flat||(location='/update.html')"></script></head><main><article><h1>如何极限优化压缩文件体积</h1><blockquote><p>在这里说“时间换空间”似乎有点不恰当，传统的“空间”通常指内存，而此处指的是文件体积。</p></blockquote><h2 id="intro">Intro</h2><p>这篇文章是我浏览 7-ZIP 帮助文档后的总结。如果你足够闲，也可自行研究。</p><p>首先确保你使用的是最新版 64 位 <a href="https://7-zip.org">7-Zip</a>。</p><h2 id="at-first">At First</h2><p>进入 7-ZIP 的安装目录，<code>Shift</code> + 右键，打开 CMD / PowerShell，尝试执行 <code>7z</code> 命令。</p><h2 id="7z-format">7Z Format</h2><p>示例参数：</p><pre><code class="language-batch">7z a -mx -myx -mmt=off -ms=on -mtm=off -mtc=off -mta=off -mtr=off -m0=LZMA:d=384m:fb=273:lc=8 -mmc=1000000000 -- D:\Archive.7z D:\ArchiveDir\*</code></pre><p>各个开关的解释：</p><ul><li><p><code>a</code>：向文档中添加文件。</p></li><li><p><code>-mx</code>：最高压缩等级预设。</p></li><li><p><code>-myx</code>：最高文件分析器预设。</p></li><li><p><code>-mmt=off</code>：禁用多线程模式。</p></li><li><p><code>-mmc=1000000000</code>：筛选器（查重）重复次数。此为最大值。</p></li><li><p><code>-ms=on</code>：始终使用固实压缩。</p></li><li><p><code>-mtm=off -mtc=off -mta=off -mtr=off</code>：不记录时间戳、文件属性（只读、隐藏、权限等）。</p></li><li><p><code>-m0=LZMA:d=384m:fb=273:lc=8</code>：使用 LZMA 压缩编码；字典大小 = 384 MB；单词大小 = 273 Bytes；<code>Literal Context Bits</code> = 8。</p></li><li><p><code>D:\Archive.7z</code>：输出文件路径。</p></li><li><p><code>D:\ArchiveDir\*</code>：输入文件夹路径。</p></li></ul><p>关于某些选项：</p><ul><li><p>通常 LZMA 的压缩率略高于 LZMA2。</p></li><li><p>字典大小建议设置为大于需要压缩的内容体积，但要注意内存占用，过高或致失败。</p></li><li><p>由于压缩内容不同，<code>Literal Context Bits</code> 有时候设置为 3 或 4 会更好些。</p></li><li><p>筛选器重复次数过高，将显著延长压缩时间。</p></li><li><p>输入文件夹路径别忘了在结尾写上 <code>\*</code>。</p></li></ul></article></main>