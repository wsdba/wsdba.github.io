<!DOCTYPE html><head><title>在安装 VS 生成工具时规避 .NET 安装错误 - kkocdko's blog</title><meta name="description" content="提示“未能安装包 Microsoft.Net.4.7.2.FullRedist...”"><script src="/bundle.js" onload="[].flat||(location='/update.html')"></script></head><main><article><h1>在安装 VS 生成工具时规避 .NET 安装错误</h1><blockquote><p>本人使用 <code>Visual Studio Build Tools 2019 16.4.29806.167</code>。理论上，此教程也适配其他版本。</p><p>安装完整 <code>Visual Studio 2019</code> 时出此错误也可尝试本方案。</p></blockquote><h2 id="prefaces">Prefaces</h2><p>Windows 上写 Rust 需要 <a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">VSBuildTools</a>，然而最近在安装时遇到了点麻烦。</p><p>安装出错，错误信息为“未能安装包 Microsoft.Net.4.7.2.FullRedist,version=4.7.3062.2”。尝试了许多搜索引擎上的方案，均无效。</p><p>据悉，此 Bug 仅在旧版 Win10 中出现，更旧的 Win7 和 Win8.1 似乎不会出现此问题。本人使用 LTSB2016，中招。</p><h2 id="how">How</h2><ol start="0"><li><p>若有安装旧版 <code>VSBuildTools</code>，先卸载并重启。</p></li><li><p>（可选）下载安装最新版 <code>.NET Framework</code>。</p></li><li><p>下载安装 <code>VSBuildTools</code>，在看到 <code>Microsoft.Net.4.7.2.FullRedist...</code> <strong>下载完成</strong>时按下暂停。</p></li><li><p>打开目录 <code>%ProgramData%\Microsoft\VisualStudio\Packages</code>。</p></li><li><p>将<strong>所有</strong>名字以 <code>Microsoft.Net.4.7.2.FullRedist...</code> 开头的文件夹内的安装程序替换为同名空程序。</p><ul><li>那么空程序哪儿找呢？现成:<a href="/./post/202001252150">《各种格式的占位空文件》</a>。如果不放心就自己编译一个。</li></ul></li></ol><blockquote><p>示例：</p><p>将空程序命名为 <code>dotNetFxLatest-x86-x64-AllOS-ENU.exe</code>，替换掉 <code>C:\ProgramData\Microsoft\VisualStudio\Packages\Microsoft.Net.4.7.2.FullRedist,version=4.7.3062.3\dotNetFxLatest-x86-x64-AllOS-ENU.exe</code>。</p><p>当然<strong>不只这一个</strong>，还有语言包等等，都需要替换。</p></blockquote><ol start="5"><li>接下来只需按下继续按钮即可。</li></ol></article></main>