<!DOCTYPE html><head><title>极限压缩文档扫描件 - kkocdko's blog</title><meta name="description" content="也适用其他颜色单调的图片"><script src="/bundle.js" onload="[].flat||(location='/update.html')"></script></head><main><article><h1>极限压缩文档扫描件</h1><h2 id="postulate">Postulate</h2><ul><li><p><a href="https://pngquant.org">pngquant</a>（用于 PNG 靠色）。</p></li><li><p><a href="https://github.com/leanify/leanify">leanify</a>（用于 PNG 高质量压缩）。</p></li></ul><h3 id="optional">Optional</h3><ul><li><p><a href="http://optipng.sourceforge.net">optipng</a>（用于将图片转换为 PNG）。</p></li><li><p><a href="https://adobe.com/photoshop">Photoshop</a>（用于批量调整图片，例如切边/调整对比度）（请支持正版（如果你有足够多钱））。</p></li><li><p><a href="https://github.com/kkocdko/cmdfactory">cmdfactory</a>（用于自动输入命令，提升 CPU 利用率，在大量处理图片的时候很有用）。</p></li></ul><h2 id="step-1-optional">Step 1 (Optional)</h2><p>使用<code>photoshop</code>调整页面。根据需要调整对比度，切除无用部分。</p><ul><li>可以使用“批处理”功能来批量调整图片。</li></ul><h2 id="step-2-optional">Step 2 (Optional)</h2><p>如果源文件不是 PNG 格式，请使用<code>optipng</code>将图片转换为 PNG。这里给出推荐的参数：</p><pre><code>optipng -o 0 -zc 1 -out {OutputFile} {InputFile}</code></pre><h2 id="step-3">Step 3</h2><p>使用<code>pngquant</code>对 PNG 文件进行靠色。这里给出推荐的参数：</p><p>对于黑白/灰度扫描件：</p><pre><code>pngquant --speed 1 --quality 0-1 --posterize 4 --nofs 4 -o {OutputFile} {InputFile}</code></pre><p>对于彩色扫描件：</p><pre><code>pngquant --speed 1 --quality 0-60 --nofs 256 -o {OutputFile} {InputFile}</code></pre><ul><li><p>最后一个数字为最大颜色数量，针对灰度扫描件推荐设置 64 以下，黑白扫描件推荐设置 4 以下。</p></li><li><p>如果发现靠色后的文件背景偏色，请将压缩后的图像使用 Photoshop 替换颜色，接着重复<code>Step 3</code>。</p></li></ul><h2 id="step-4">Step 4</h2><p>使用<code>zopflipng</code>对 PNG 文件进行极限压缩。这里给出推荐的参数：</p><pre><code>zopflipng -m {InputFile} {OutputFile}</code></pre><ul><li>将耗费较多算力。</li></ul><h2 id="postscript">Postscript</h2><ul><li>在将图片添加到 PDF 或其他格式文档中时，记得不要进行二次压缩。</li></ul></article></main>